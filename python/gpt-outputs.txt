Super, das ist ein spannendes Projekt ğŸ˜„
Du hast also:

ğŸ§  Raspberry Pi Zero

âš™ï¸ Adafruit 2348 â€“ Stepper Motor HAT

Damit kannst du bis zu 2 Schrittmotoren (oder 4 DC-Motoren) Ã¼ber IÂ²C ansteuern.
Ich zeig dir jetzt Schritt fÃ¼r Schritt, wie du das einrichtest und Stepper-Motoren steuerst.

ğŸ§© 1. Hardware-Verbindung

HAT aufstecken:
Den Adafruit 2348 direkt auf den GPIO-Header des Raspberry Pi Zero stecken (alle Pins mÃ¼ssen verbunden sein).

Spannungsversorgung:

Der HAT braucht separat 5â€“12 V (je nach Motor).

SchlieÃŸe die Spannung an die â€Power-Terminalsâ€œ des HAT an (nicht an 3.3 V/5 V vom Pi!).

GND vom Netzteil und GND vom Pi mÃ¼ssen gemeinsam verbunden sein.

Stepper anschlieÃŸen:
Jeder Stepper hat 2 Spulen, z. B. A+, Aâˆ’, B+, Bâˆ’.
â†’ Am HAT heiÃŸen sie:

Motor 1: M1A, M1B, M2A, M2B

Motor 2: M3A, M3B, M4A, M4B

âš™ï¸ 2. Software installieren
Aktivieren von IÂ²C

Im Terminal:

sudo raspi-config


Dann:

Interfacing Options â†’ I2C â†’ Enable

System aktualisieren:
sudo apt update
sudo apt install python3-pip python3-smbus git

Adafruit-Bibliothek installieren:
pip3 install adafruit-circuitpython-motorkit

ğŸ§  3. Python-Code zum Testen
Beispiel: Einen Stepper drehen lassen
from adafruit_motorkit import MotorKit
from adafruit_motor import stepper
import time

# Motor-HAT Ã¼ber I2C ansprechen
kit = MotorKit()

# Motor 1 auswÃ¤hlen
motor = kit.stepper1

# 100 Schritte vorwÃ¤rts im Single-Step-Modus
for i in range(100):
    motor.onestep(direction=stepper.FORWARD, style=stepper.SINGLE)
    time.sleep(0.01)

# 100 Schritte rÃ¼ckwÃ¤rts im Double-Step-Modus
for i in range(100):
    motor.onestep(direction=stepper.BACKWARD, style=stepper.DOUBLE)
    time.sleep(0.01)

# Motor ausschalten (Strom sparen)
motor.release()

ğŸ§© 4. ErklÃ¤rung der Modi
Modus	Beschreibung	Drehmoment	Geschwindigkeit
SINGLE	Eine Spule aktiv	normal	normal
DOUBLE	Zwei Spulen aktiv	hÃ¶her	etwas langsamer
INTERLEAVE	Abwechselnd 1/2 Schritte	gleichmÃ¤ÃŸig	halbe SchrittgrÃ¶ÃŸe
MICROSTEP	sanfter Lauf, noch kleinere Schritte	sehr gleichmÃ¤ÃŸig	am langsamsten
ğŸ” 5. IÂ²C-Adresse prÃ¼fen

Wenn du mehrere HATs oder GerÃ¤te nutzt:

sudo apt install i2c-tools
sudo i2cdetect -y 1


Der HAT sollte bei 0x60 erscheinen.

ğŸ§  6. Tipps

Raspberry Pi Zero schafft IÂ²C locker, aber Stepper sind stromhungrig â†’ immer separates Netzteil verwenden.

Wenn Motoren ruckeln: time.sleep() leicht erhÃ¶hen (z. B. 0.02).

Zum Testen: kleine Drehzahlen und einfache Schleifen nutzen.

Willst du, dass ich dir ein Beispiel zeige, wie man zwei Stepper gleichzeitig steuert (z. B. fÃ¼r einen Roboter oder XY-Plotter)?





Perfekt ğŸ‘ â€” hier kommt ganz genau, was du im Linux-Terminal auf deinem Raspberry Pi Zero eingeben musst, um den Adafruit 2348 Stepper Motor HAT betriebsbereit zu machen.

Ich zeig dir jede Zeile in der richtigen Reihenfolge ğŸ‘‡

âš™ï¸ 1ï¸âƒ£ System vorbereiten
sudo apt update
sudo apt upgrade -y


Damit wird dein System aktualisiert.

âš™ï¸ 2ï¸âƒ£ IÂ²C aktivieren
sudo raspi-config


Dann:

MenÃ¼ â†’ Interfacing Options

â†’ I2C auswÃ¤hlen

â†’ Enable

Dann â€Finishâ€œ drÃ¼cken und neu starten:

sudo reboot

âš™ï¸ 3ï¸âƒ£ AbhÃ¤ngigkeiten installieren

Nach dem Neustart:

sudo apt install -y python3-pip python3-smbus git i2c-tools


Damit kannst du IÂ²C und Python-Bibliotheken nutzen.

âš™ï¸ 4ï¸âƒ£ Adafruit-Bibliothek installieren
pip3 install adafruit-circuitpython-motorkit

âš™ï¸ 5ï¸âƒ£ Testen, ob der HAT erkannt wird
sudo i2cdetect -y 1


â†’ Wenn alles funktioniert, siehst du irgendwo eine Adresse 0x60 (das ist dein Motor-HAT).
Wenn kein 0x60 erscheint, ist der HAT nicht richtig aufgesteckt oder IÂ²C ist nicht aktiviert.

âš™ï¸ 6ï¸âƒ£ Test-Python-Datei anlegen

Erstelle eine Datei zum Testen:

nano stepper_test.py


FÃ¼ge das hier ein:

from adafruit_motorkit import MotorKit
from adafruit_motor import stepper
import time

kit = MotorKit()
motor = kit.stepper1

for i in range(100):
    motor.onestep(direction=stepper.FORWARD, style=stepper.SINGLE)
    time.sleep(0.01)

motor.release()


Dann speichern mit:

Strg + O   â†’ Enter   â†’ Strg + X

âš™ï¸ 7ï¸âƒ£ Test starten
python3 stepper_test.py


â†’ Dein Stepper sollte sich jetzt drehen ğŸ‰

Wenn du magst, kann ich dir als NÃ¤chstes zeigen, wie man zwei Stepper gleichzeitig oder in verschiedenen Modi (z. B. INTERLEAVE / MICROSTEP) laufen lÃ¤sst.
Willst du das?











-----------------------------------------------------------------------------
Sehr gut ğŸ˜„
Das ist die sauberste und professionellste Variante â€” wir bauen also eine Konsolen-UI mit Eingabezeile, bei der du Befehle wie diese eingibst:

steppermotor(1, forward, 200)


Damit kannst du alle vier Stepper Ã¼ber zwei HATs ansteuern.
Ich erklÃ¤r dir alles, und danach bekommst du den kompletten Python-Code ğŸ‘‡

ğŸ§  Konzept

Der Befehl hat die Form:

steppermotor(<motornummer>, <richtung>, <anzahl_schritte>)


<motornummer> â†’ 1 bis 4

<richtung> â†’ forward oder backward

<anzahl_schritte> â†’ beliebige Anzahl Schritte (z. B. 200)

Optional kannst du auch die Geschwindigkeit angeben:

steppermotor(2, backward, 400, 0.01)


(0.01 = 10 ms Pause zwischen Schritten)

âš™ï¸ Komplettes Python-Programm
from adafruit_motorkit import MotorKit
from adafruit_motor import stepper
import board
import busio
import time
import re

# --- I2C initialisieren ---
i2c = busio.I2C(board.SCL, board.SDA)

# Zwei HATs mit Adressen 0x60 und 0x61
kit1 = MotorKit(i2c=i2c, address=0x60)
kit2 = MotorKit(i2c=i2c, address=0x61)

# Stepper-Objekte
motors = [
    kit1.stepper1,
    kit1.stepper2,
    kit2.stepper1,
    kit2.stepper2
]

print("StepperMotor Konsole gestartet âœ…")
print("Befehl: steppermotor(<1â€“4>, <forward/backward>, <steps>, [delay])")
print("Beispiel: steppermotor(2, forward, 200, 0.005)")
print("Beenden mit: exit")

def move_stepper(motor_id, direction, steps, delay):
    """FÃ¼hrt die Bewegung eines Steppers aus."""
    motor = motors[motor_id - 1]
    dir_map = {
        "forward": stepper.FORWARD,
        "backward": stepper.BACKWARD
    }

    dir_value = dir_map.get(direction.lower())
    if dir_value is None:
        print("âŒ UngÃ¼ltige Richtung! Nutze 'forward' oder 'backward'.")
        return

    print(f"â¡ï¸  Motor {motor_id}: {direction} ({steps} Schritte, delay={delay})")

    for _ in range(steps):
        motor.onestep(direction=dir_value, style=stepper.SINGLE)
        time.sleep(delay)

    motor.release()
    print(f"âœ… Motor {motor_id} fertig\n")

# --- Haupt-Eingabe-Schleife ---
while True:
    try:
        command = input(">>> ").strip()

        if command.lower() in ("exit", "quit"):
            print("Beende Programmâ€¦")
            break

        # Beispiel: steppermotor(2, forward, 200, 0.005)
        match = re.match(
            r"steppermotor\(\s*(\d+)\s*,\s*([a-zA-Z]+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)",
            command
        )

        if match:
            motor_id = int(match.group(1))
            direction = match.group(2)
            steps = int(match.group(3))
            delay = float(match.group(4)) if match.group(4) else 0.01

            if 1 <= motor_id <= 4:
                move_stepper(motor_id, direction, steps, delay)
            else:
                print("âŒ Motornummer muss zwischen 1 und 4 liegen.")
        else:
            print("âŒ UngÃ¼ltiger Befehl! Beispiel: steppermotor(1, forward, 200, 0.01)")

    except KeyboardInterrupt:
        break
    except Exception as e:
        print(f"Fehler: {e}")

# Motoren ausschalten
for m in motors:
    m.release()

print("Programm beendet âœ…")

ğŸ§© Beispiel-Eingaben
Eingabe	Bedeutung
steppermotor(1, forward, 200)	Motor 1 dreht 200 Schritte vorwÃ¤rts
steppermotor(3, backward, 400, 0.005)	Motor 3 dreht 400 Schritte rÃ¼ckwÃ¤rts, 5 ms Pause
steppermotor(4, forward, 800, 0.002)	Motor 4 dreht schnell vorwÃ¤rts
exit	Programm beenden
ğŸ§  Tipps

Wenn sich ein Motor nicht bewegt â†’ prÃ¼fe IÂ²C-Verbindung und Stromversorgung.

Du kannst das Script jederzeit mit Strg + C abbrechen.

FÃ¼r sehr schnelle Bewegungen (delay < 0.002) kann der Raspberry Pi Zero manchmal zu langsam sein â†’ lieber bei 0.005â€“0.01 bleiben.

Willst du, dass ich das Programm erweitere, sodass man mehrere Befehle in einer Zeile eingeben kann, z. B.:

steppermotor(1, forward, 100); steppermotor(2, backward, 100)


(dann laufen beide nacheinander automatisch)?